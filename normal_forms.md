# Нормализация базы данных автосервиса

## Первая нормальная форма (1НФ) - устранение неатомарных данных

### Проблема с графиком смен
Изначально система управления сменами сотрудников была построена неправильно. Мы пытались хранить информацию о сменах и сотрудниках в одной таблице, где одна смена могла быть связана только с одним сотрудником.

**Аномалии:**
- **Аномалия вставки**: Невозможно добавить второго сотрудника на существующую смену без создания дубликата смены
- **Аномалия удаления**: При удалении сотрудника из смены может случайно удалиться вся информация о смене
- **Аномалия обновления**: Изменение времени смены требует обновления всех её дубликатов для разных сотрудников

> **Решение:**
Мы разделили данные на две таблицы. В таблице `Shift_schedule` хранится информация о самих сменах, а в таблице `Employee_shift` через составной ключ отслеживается связь сотрудников и смен.

## Вторая нормальная форма (2НФ) - устранение частичных зависимостей

### Проблема с ценами в заказах
В исходной структуре цены товаров хранились непосредственно в таблицах заказов, создавая частичные зависимости.

**Аномалии:**
- **Аномалия обновления**: Изменение цены товара требует поиска и обновления всех заказов, где этот товар присутствует
- **Аномалия вставки**: При добавлении товара в заказ необходимо вручную вводить цену, что может привести к ошибкам
- **Аномалия несогласованности**: Возможность иметь разные цены на один товар в разных заказах

> **Решение:**
Создана отдельная таблица `Product_prices` для централизованного хранения цен. В таблицах заказов теперь хранится только ссылка на актуальную цену.

## Третья нормальная форма (3НФ) - устранение транзитивных зависимостей

### Проблема зависимости товаров от поставщиков
Стоимость товара зависела не от его характеристик, а от поставщика.

**Аномалии:**
- **Аномалия удаления**: Удаление поставщика приводит к потере всех связанных с ним товаров

> **Решение:**
Разделены сущности "товар" и "поставщик". Товары теперь описываются независимо, а цены привязываются к комбинации товар-поставщик.

### Проблема с автомобильными марками
Марки и модели автомобилей хранились как простой текст. Модель зависит от марки, что создает транзитивную зависимость

**Аномалии:**
- **Аномалия обновления**: Исправление опечатки в названии марки требует обновления всех связанных записей, разные написания одной марки ("Toyota", "Тойота") приводят к разделению данных

> **Решение:**
Созданы таблицы `Car_brand` и `Car_model` для стандартизации данных.

### Стандартизация должностей
**Аномалии:**
- **Аномалия обновления**: Изменение описания должности требует обновления всех сотрудников этой должности
- **Аномалия несогласованности**: Разные написания одной должности ("менеджер", "Менеджер", "менеджер по продажам")

> **Решение:**
Создана таблица `Employee_position` для централизованного хранения должностей.

## Нормальная форма Бойса-Кодда - устранение зависимостей от неключевых атрибутов




**Решение:**
Создана таблица `Employee_position` для централизованного хранения должностей.

**История изменений цен**
**Аномалии:**
- **Аномалия удаления**: Удаление товара приводит к потере всей истории его цен
- **Аномалия анализа**: Невозможность отследить динамику изменения цен over time

**Решение:**
Таблица `Product_prices` сохраняет историю всех изменений цен с временными метками.

**Категоризация товаров**
**Аномалии:**
- **Аномалия обновления**: Изменение названия категории требует обновления всех товаров этой категории
- **Аномалия вставки**: Невозможно создать категорию без немедленного добавления в неё товаров

**Решение:**
Добавлена таблица `Product_category` для независимого управления категориями.

